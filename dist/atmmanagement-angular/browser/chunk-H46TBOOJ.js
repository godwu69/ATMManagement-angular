import{a as z,b as W,c as N,d as j,e as B,f as F,g as q,h as D}from"./chunk-KYWOQ6FP.js";import{B as d,D as m,F as x,G as o,H as n,I as M,J as y,K as v,L as h,M as _,N as u,O,P as g,Q as S,T as C,U as w,V as b,X as T,_ as L,ia as V,la as k,ma as I,n as E,r as c,ra as R,s as p,w as r,x as P}from"./chunk-2EZZRFYD.js";function H(t,i){if(t&1&&(o(0,"div",15),g(1),n()),t&2){let s=u();r(),S(s.message)}}function G(t,i){if(t&1){let s=h();o(0,"img",16),_("click",function(){c(s);let a=u();return p(a.toggleShowPassword())}),n()}}function X(t,i){if(t&1){let s=h();o(0,"img",17),_("click",function(){c(s);let a=u();return p(a.toggleShowPassword())}),n()}}function J(t,i){t&1&&(y(0),M(1,"div",18),v())}function U(t,i){t&1&&g(0,"Log in")}function K(t,i){if(t&1){let s=h();o(0,"div",19),_("click",function(){c(s);let a=u();return p(a.toggleRegister())}),M(1,"img",20),g(2,"Register "),n()}}function Q(t,i){if(t&1&&(o(0,"div",15),g(1),n()),t&2){let s=u();r(),S(s.message)}}function Y(t,i){if(t&1){let s=h();o(0,"img",16),_("click",function(){c(s);let a=u();return p(a.toggleShowPassword())}),n()}}function Z(t,i){if(t&1){let s=h();o(0,"img",17),_("click",function(){c(s);let a=u();return p(a.toggleShowPassword())}),n()}}function $(t,i){t&1&&(y(0),M(1,"div",18),v())}function ee(t,i){t&1&&g(0,"Register")}function te(t,i){if(t&1){let s=h();o(0,"div",19),_("click",function(){c(s);let a=u();return p(a.toggleRegister())}),M(1,"img",20),g(2,"Log in "),n()}}var A=class t{constructor(i,s){this.http=i;this.router=s}email="";password="";name="";isLoading=!1;isRegister=!1;message="";isShowPassword=!1;login(){if(this.isLoading=!0,!this.email||!this.password){this.message="Please fill in all fields",setTimeout(()=>{this.message=""},2e3),this.isLoading=!1;return}this.http.post("https://atm-management.azurewebsites.net/api/auth/login",{email:this.email,password:this.password}).subscribe({next:i=>{localStorage.setItem("token",i.token),localStorage.setItem("customerId",i.customerId),localStorage.setItem("email",i.email),console.log("Login successful!"),this.isLoading=!1,this.router.navigate(["/dashboard"])},error:i=>{this.isLoading=!1,this.message=i.error.message?i.error.message:"An error occurred. Please try again.",setTimeout(()=>{this.message=""},2e3),console.log(i.error.message)}})}register(){if(this.isLoading=!0,!this.email||!this.password||!this.name){this.message="Please fill in all fields",setTimeout(()=>{this.message=""},2e3),this.isLoading=!1;return}this.http.post("https://atm-management.azurewebsites.net/api/auth/register",{email:this.email,password:this.password,name:this.name}).subscribe({next:i=>{alert("Register successful!"),setTimeout(()=>{this.message=""},2e3),this.isLoading=!1},error:i=>{this.message=i.error.message?i.error.message:"An error occurred. Please try again.",setTimeout(()=>{this.message=""},2e3),alert("Register failed: "+i.message),this.isLoading=!1}})}toggleRegister(){this.isRegister=!this.isRegister,this.email="",this.password="",this.name=""}toggleShowPassword(){this.isShowPassword=!this.isShowPassword}static \u0275fac=function(s){return new(s||t)(P(I),P(R))};static \u0275cmp=E({type:t,selectors:[["app-login"]],standalone:!0,features:[T],decls:47,vars:25,consts:[["loginText",""],["registerText",""],["id","login-container"],["id","login-form",3,"submit"],["class","alert-mess",4,"ngIf"],[1,"input-area"],["type","email","name","email","placeholder","email","required","",3,"ngModelChange","ngModel"],["name","password","placeholder","password","required","",3,"ngModelChange","type","ngModel"],["width","20","height","20","ngSrc","https://img.icons8.com/fluency-systems-regular/200/000000/invisible--v1.png","alt","invisible--v1",3,"click",4,"ngIf"],["width","20","height","20","ngSrc","https://img.icons8.com/fluency-systems-regular/200/000000/visible--v1.png","alt","visible--v1",3,"click",4,"ngIf"],["type","submit",3,"disabled"],[4,"ngIf","ngIfElse"],["class","toggle-btn",3,"click",4,"ngIf"],["id","register-form",3,"submit"],["type","text","name","name","placeholder","name","required","",3,"ngModelChange","ngModel"],[1,"alert-mess"],["width","20","height","20","ngSrc","https://img.icons8.com/fluency-systems-regular/200/000000/invisible--v1.png","alt","invisible--v1",3,"click"],["width","20","height","20","ngSrc","https://img.icons8.com/fluency-systems-regular/200/000000/visible--v1.png","alt","visible--v1",3,"click"],[1,"loading"],[1,"toggle-btn",3,"click"],["width","20","height","20","ngSrc","https://img.icons8.com/pastel-glyph/200/000000/collapse-arrow.png","alt","arrow"]],template:function(s,e){if(s&1){let a=h();o(0,"main",2)(1,"form",3),_("submit",function(){return c(a),p(e.login())}),d(2,H,2,1,"div",4),o(3,"h2"),g(4,"Welcome Back"),n(),o(5,"span"),g(6,"Please log in to your account"),n(),o(7,"div",5)(8,"input",6),b("ngModelChange",function(l){return c(a),w(e.email,l)||(e.email=l),p(l)}),n(),o(9,"label"),g(10,"Email"),n()(),o(11,"div",5)(12,"input",7),b("ngModelChange",function(l){return c(a),w(e.password,l)||(e.password=l),p(l)}),n(),o(13,"label"),g(14,"Password"),n(),d(15,G,1,0,"img",8)(16,X,1,0,"img",9),n(),o(17,"button",10),d(18,J,2,0,"ng-container",11)(19,U,1,0,"ng-template",null,0,L),n()(),d(21,K,3,0,"div",12),o(22,"form",13),_("submit",function(){return c(a),p(e.register())}),d(23,Q,2,1,"div",4),o(24,"h2"),g(25,"Join To Get Unlimited Money"),n(),o(26,"span"),g(27,"Please fill in the form below"),n(),o(28,"div",5)(29,"input",14),b("ngModelChange",function(l){return c(a),w(e.name,l)||(e.name=l),p(l)}),n(),o(30,"label"),g(31,"Name"),n()(),o(32,"div",5)(33,"input",6),b("ngModelChange",function(l){return c(a),w(e.email,l)||(e.email=l),p(l)}),n(),o(34,"label"),g(35,"Email"),n()(),o(36,"div",5)(37,"input",7),b("ngModelChange",function(l){return c(a),w(e.password,l)||(e.password=l),p(l)}),n(),o(38,"label"),g(39,"Password"),n(),d(40,Y,1,0,"img",8)(41,Z,1,0,"img",9),n(),o(42,"button",10),d(43,$,2,0,"ng-container",11)(44,ee,1,0,"ng-template",null,1,L),n()(),d(46,te,3,0,"div",12),n()}if(s&2){let a=O(20),f=O(45);r(),x(e.isRegister?"hide":"show"),r(),m("ngIf",e.message),r(6),C("ngModel",e.email),r(4),m("type",e.isShowPassword?"text":"password"),C("ngModel",e.password),r(3),m("ngIf",!e.isShowPassword),r(),m("ngIf",e.isShowPassword),r(),m("disabled",e.isLoading),r(),m("ngIf",e.isLoading)("ngIfElse",a),r(3),m("ngIf",!e.isRegister),r(),x(e.isRegister?"show":"hide"),r(),m("ngIf",e.message),r(6),C("ngModel",e.name),r(4),C("ngModel",e.email),r(4),m("type",e.isShowPassword?"text":"password"),C("ngModel",e.password),r(3),m("ngIf",!e.isShowPassword),r(),m("ngIf",e.isShowPassword),r(),m("disabled",e.isLoading),r(),m("ngIf",e.isLoading)("ngIfElse",f),r(3),m("ngIf",e.isRegister)}},dependencies:[D,F,z,W,N,q,B,j,V,k],styles:['#login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:100px auto;width:500px;background-color:#fff;border-radius:5px;box-shadow:0 0 10px #0000001a;overflow:hidden}#login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], #register-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;font-size:25px;color:#0071dc;width:100%;text-align:center;margin-top:30px}#login-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000000b3;margin-top:-20px;margin-bottom:20px;font-size:14px;width:100%;text-align:center}#login-form[_ngcontent-%COMP%], #register-form[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:30px;margin-bottom:40px;position:relative}#register-form.hide[_ngcontent-%COMP%], #login-form.hide[_ngcontent-%COMP%]{display:none}#register-form.show[_ngcontent-%COMP%], #login-form.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_loginForm .7s forwards}@keyframes _ngcontent-%COMP%_loginForm{0%{opacity:0;top:50px}to{opacity:1;top:0}}.input-area[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative}.input-area[_ngcontent-%COMP%]:before{position:absolute;content:"";height:1px;border-bottom:1px solid rgba(0,0,0,.4);bottom:0;left:0;right:0;pointer-events:none}.input-area[_ngcontent-%COMP%]:hover:before{border-bottom:2px solid #000000}.input-area[_ngcontent-%COMP%]:after{position:absolute;content:"";bottom:0;left:0;right:0;transform:scaleX(0);border-bottom:2px solid #0071dc;transition:all .4s ease-in-out;pointer-events:none}.input-area[_ngcontent-%COMP%]:focus-within:after{transform:scaleX(1);transition:all .4s ease-in-out}.input-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;outline:none;padding:10px 0;font-size:14px}.input-area[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;left:0;bottom:10px;color:#0006;font-size:14px;transition:all .4s ease-in-out;pointer-events:none}.input-area.error-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:red}.input-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .input-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) ~ label[_ngcontent-%COMP%]{bottom:35px;color:#0071dc;transition:all .4s ease-in-out;font-size:12px}.input-area.error-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%]{color:red}.input-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:transparent;pointer-events:none}#login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%], #register-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#0071dc;border:none;outline:none;color:#fff;width:100%;padding:10px;font-size:16px;border-radius:5px;cursor:pointer;position:relative;overflow:hidden;z-index:1;text-align:center;font-weight:500}#login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:before, #register-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:before{position:absolute;content:"";z-index:-1;height:100%;left:-10%;top:0;width:0;transition:all .4s ease-in-out;transform:skew(50deg)}#login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover:before, #register-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover:before{width:120%;transition:all .4s ease-in-out;background-color:#000}#login-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;font-size:13px;margin-top:-20px;text-align:right}#login-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-size:13px;cursor:pointer}#login-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0071dc;text-decoration:underline}.forgot-pass[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#000}.toggle-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;color:#000;text-align:center;font-size:16px;font-weight:500;cursor:pointer;transition:all .4s ease-in-out;position:relative;bottom:10px;z-index:1}.toggle-btn[_ngcontent-%COMP%]:hover{bottom:20px;transition:all .4s ease-in-out}.input-area[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;right:0;bottom:10px;cursor:pointer}#password[_ngcontent-%COMP%], #register-password[_ngcontent-%COMP%], #register-password-confirm[_ngcontent-%COMP%]{padding-right:30px}.error[_ngcontent-%COMP%]{width:100%;margin-top:-30px}.error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red!important;font-size:13px!important;width:100%;text-align:left}.alert-mess[_ngcontent-%COMP%]{position:absolute;z-index:1;width:100%;text-align:center;background-color:#0009;color:#fff;padding:10px;border-radius:5px;font-size:14px;top:50%}.loading[_ngcontent-%COMP%]{border:2px solid #ffffff;border-left-color:#0071dc;animation:_ngcontent-%COMP%_spin 1s linear infinite;border-radius:50%;width:20px;height:20px;display:inline-block;vertical-align:middle}button[_ngcontent-%COMP%]:disabled{background-color:gray!important;pointer-events:none}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']})};export{A as LoginComponent};
